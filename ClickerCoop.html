<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Clicker Master - Modo Cooperativo</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      font-family: Arial, sans-serif;
      background-color: #f0f0f0;
      user-select: none;
    }

    .game-container {
      width: 90%;
      max-width: 1000px;
      margin: 20px auto;
      text-align: center;
    }

    .progress-container {
      width: 100%;
      height: 30px;
      background-color: #e0e0e0;
      border-radius: 15px;
      margin: 20px 0;
      overflow: hidden;
    }

    .progress-bar {
      height: 100%;
      background-color: #4CAF50;
      width: 0%;
      transition: width 0.2s;
      border-radius: 15px;
    }

    .stats {
      display: flex;
      justify-content: space-between;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .stat-box {
      background-color: #fff;
      padding: 10px 20px;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      flex: 1;
      min-width: 100px;
      margin: 5px;
    }

    .click-areas {
      display: flex;
      gap: 20px;
      margin-bottom: 20px;
    }

    .click-area {
      flex: 1;
      height: 200px;
      background-color: #fff;
      border-radius: 10px;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      transition: transform 0.1s;
      position: relative;
      overflow: hidden;
    }

    .click-area:active {
      transform: scale(0.98);
      background-color: #f8f8f8;
    }

    .player-identifier {
      position: absolute;
      top: 10px;
      left: 10px;
      padding: 5px 10px;
      border-radius: 5px;
      font-weight: bold;
      color: white;
    }

    .player1 .player-identifier {
      background-color: #2196F3;
    }

    .player2 .player-identifier {
      background-color: #FF5722;
    }

    .click-effect {
      position: absolute;
      pointer-events: none;
      border-radius: 50%;
      animation: clickEffect 0.5s forwards;
      opacity: 0.6;
    }

    @keyframes clickEffect {
      0% {
        transform: scale(0);
        opacity: 0.7;
      }
      100% {
        transform: scale(1);
        opacity: 0;
      }
    }

    h1 {
      color: #333;
    }

    .level-up {
      animation: pulse 1s;
    }

    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }

    .game-sections {
      display: flex;
      gap: 20px;
      justify-content: space-between;
      flex-wrap: wrap;
    }

    .section {
      flex: 1;
      min-width: 300px;
      background-color: #fff;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      padding: 15px;
      margin-bottom: 20px;
    }

    .upgrade-item, .achievement-item {
      background-color: #f9f9f9;
      border-radius: 8px;
      padding: 10px;
      margin: 10px 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: background-color 0.2s;
    }

    .upgrade-item:hover {
      background-color: #f0f0f0;
    }

    .upgrade-item.disabled {
      opacity: 0.7;
      cursor: not-allowed;
    }

    .buy-button {
      background-color: #4CAF50;
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    .buy-button:hover {
      background-color: #45a049;
    }

    .buy-button:disabled {
      background-color: #cccccc;
      cursor: not-allowed;
    }

    .achievement-item.unlocked {
      background-color: #e7f7e7;
      border-left: 4px solid #4CAF50;
    }

    .achievement-item.locked {
      background-color: #f0f0f0;
      border-left: 4px solid #cccccc;
      color: #777;
    }

    .upgrade-info, .achievement-info {
      text-align: left;
    }
    
    .upgrade-level {
      font-size: 0.8em;
      color: #666;
    }
    
    .notification {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: #4CAF50;
      color: white;
      padding: 15px;
      border-radius: 5px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
      opacity: 0;
      transition: opacity 0.3s;
      z-index: 100;
    }
    
    .notification.show {
      opacity: 1;
    }

    .player-stats {
      display: flex;
      gap: 20px;
      margin-bottom: 20px;
    }

    .player-stat {
      flex: 1;
      background-color: #fff;
      border-radius: 10px;
      padding: 15px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    .player-stat.player1 {
      border-top: 5px solid #2196F3;
    }

    .player-stat.player2 {
      border-top: 5px solid #FF5722;
    }

    .player-stat-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .player-stat-content {
      display: flex;
      gap: 10px;
    }

    .player-stat-item {
      flex: 1;
      text-align: center;
      background-color: #f9f9f9;
      padding: 10px;
      border-radius: 5px;
    }

    .player-stat-label {
      font-size: 0.8em;
      color: #666;
    }

    .player-stat-value {
      font-size: 1.2em;
      font-weight: bold;
    }

    .player-contribution {
      height: 5px;
      background-color: #e0e0e0;
      border-radius: 5px;
      overflow: hidden;
      margin-top: 10px;
    }

    .player1-contribution {
      height: 100%;
      background-color: #2196F3;
      float: left;
    }

    .player2-contribution {
      height: 100%;
      background-color: #FF5722;
      float: right;
    }

    .mode-selection {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin: 10px 0;
    }

    .mode-button {
      padding: 8px 15px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
      transition: background-color 0.2s;
    }

    .mode-button.active {
      background-color: #4CAF50;
      color: white;
    }

    .mode-button:not(.active) {
      background-color: #e0e0e0;
      color: #333;
    }

    .tab-buttons {
      display: flex;
      margin-bottom: 15px;
    }

    .tab-button {
      flex: 1;
      padding: 10px;
      background-color: #e0e0e0;
      border: none;
      cursor: pointer;
      font-weight: bold;
      transition: background-color 0.2s;
    }

    .tab-button:first-child {
      border-top-left-radius: 5px;
      border-bottom-left-radius: 5px;
    }

    .tab-button:last-child {
      border-top-right-radius: 5px;
      border-bottom-right-radius: 5px;
    }

    .tab-button.active {
      background-color: #4CAF50;
      color: white;
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    .synergy-upgrade {
      background-color: #e3f2fd;
      border-left: 4px solid #2196F3;
    }

    /* Media Queries for responsive design */
    @media (max-width: 768px) {
      .click-areas {
        flex-direction: column;
      }
      
      .player-stats {
        flex-direction: column;
      }
    }

    .team-bonus {
      background-color: #e8f5e9;
      border-radius: 5px;
      padding: 10px;
      margin: 10px 0;
      text-align: center;
      font-weight: bold;
      border: 1px dashed #4CAF50;
    }
  </style>
</head>
<body>
  <div class="game-container">
    <h1>Clicker Master</h1>

    <div class="mode-selection">
      <button class="mode-button" id="solo-mode-button">Modo Solo</button>
      <button class="mode-button active" id="coop-mode-button">Modo Cooperativo</button>
    </div>
    
    <div class="stats">
      <div class="stat-box">
        <h3>Nível</h3>
        <div id="level">1</div>
      </div>
      <div class="stat-box">
        <h3>Cliques</h3>
        <div id="clicks">0</div>
      </div>
      <div class="stat-box">
        <h3>Meta</h3>
        <div id="target">20</div>
      </div>
      <div class="stat-box">
        <h3>Moedas</h3>
        <div id="coins">0</div>
      </div>
      <div class="stat-box">
        <h3>Poder de Clique</h3>
        <div id="click-power">1</div>
      </div>
    </div>
    
    <div class="progress-container">
      <div class="progress-bar" id="progress-bar"></div>
    </div>

    <div class="team-bonus" id="team-bonus">
      Bônus de Equipe: +20% de poder de clique quando ambos jogadores estão ativos!
    </div>
    
    <div class="player-stats">
      <div class="player-stat player1">
        <div class="player-stat-header">
          <h3>Jogador 1</h3>
          <div>Cliques: <span id="player1-clicks">0</span></div>
        </div>
        <div class="player-stat-content">
          <div class="player-stat-item">
            <div class="player-stat-label">Poder</div>
            <div class="player-stat-value" id="player1-power">1</div>
          </div>
          <div class="player-stat-item">
            <div class="player-stat-label">Contribuição</div>
            <div class="player-stat-value" id="player1-contribution">0%</div>
          </div>
        </div>
      </div>
      
      <div class="player-stat player2">
        <div class="player-stat-header">
          <h3>Jogador 2</h3>
          <div>Cliques: <span id="player2-clicks">0</span></div>
        </div>
        <div class="player-stat-content">
          <div class="player-stat-item">
            <div class="player-stat-label">Poder</div>
            <div class="player-stat-value" id="player2-power">1</div>
          </div>
          <div class="player-stat-item">
            <div class="player-stat-label">Contribuição</div>
            <div class="player-stat-value" id="player2-contribution">0%</div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="player-contribution">
      <div class="player1-contribution" id="player1-contribution-bar" style="width: 50%"></div>
      <div class="player2-contribution" id="player2-contribution-bar" style="width: 50%"></div>
    </div>
    
    <div class="click-areas">
      <div class="click-area player1" id="player1-area">
        <div class="player-identifier">Jogador 1 (Q)</div>
        Clique aqui ou pressione Q!
      </div>
      
      <div class="click-area player2" id="player2-area">
        <div class="player-identifier">Jogador 2 (P)</div>
        Clique aqui ou pressione P!
      </div>
    </div>
    
    <div class="game-sections">
      <div class="section">
        <div class="tab-buttons">
          <button class="tab-button active" data-tab="upgrades">Upgrades</button>
          <button class="tab-button" data-tab="achievements">Objetivos</button>
        </div>
        
        <div class="tab-content active" id="upgrades">
          <div id="upgrades-container">
            <!-- Upgrades will be added here dynamically -->
          </div>
        </div>
        
        <div class="tab-content" id="achievements">
          <div id="achievements-container">
            <!-- Achievements will be added here dynamically -->
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div class="notification" id="notification"></div>

<script>
// Game state
let clicks = 0;
let level = 1;
let targetClicks = 20;
let coins = 0;
let clickPower = 1;
let isCoopMode = true;

const players = {
    player1: { clicks: 0, power: 1, key: 'Q', keyCode: 81, lastClickTime: 0, isActive: false },
    player2: { clicks: 0, power: 1, key: 'P', keyCode: 80, lastClickTime: 0, isActive: false }
};

// DOM elements
const elements = {
    progressBar: document.getElementById('progress-bar'),
    clicksDisplay: document.getElementById('clicks'),
    levelDisplay: document.getElementById('level'),
    targetDisplay: document.getElementById('target'),
    coinsDisplay: document.getElementById('coins'),
    clickPowerDisplay: document.getElementById('click-power'),
    player1Area: document.getElementById('player1-area'),
    player2Area: document.getElementById('player2-area'),
    player1Clicks: document.getElementById('player1-clicks'),
    player2Clicks: document.getElementById('player2-clicks'),
    player1Power: document.getElementById('player1-power'),
    player2Power: document.getElementById('player2-power'),
    player1Contribution: document.getElementById('player1-contribution'),
    player2Contribution: document.getElementById('player2-contribution'),
    player1ContributionBar: document.getElementById('player1-contribution-bar'),
    player2ContributionBar: document.getElementById('player2-contribution-bar'),
    teamBonus: document.getElementById('team-bonus'),
    upgradesContainer: document.getElementById('upgrades-container'),
    achievementsContainer: document.getElementById('achievements-container'),
    notification: document.getElementById('notification'),
    soloModeButton: document.getElementById('solo-mode-button'),
    coopModeButton: document.getElementById('coop-mode-button'),
    playerStats: document.querySelector('.player-stats'),
    clickAreas: document.querySelector('.click-areas')
};

// Upgrades e achievements permanecem iguais ao seu código original
const upgrades = [/* ... seu array de upgrades original ... */];
const achievements = [/* ... seu array de achievements original ... */];

function initGame() {
    updateDisplays();
    renderUpgrades();
    renderAchievements();
    updateModeDisplay();

    // Event Listeners
    elements.player1Area.addEventListener('click', (e) => {
        e.stopPropagation();
        playerClick('player1', e);
    });

    elements.player2Area.addEventListener('click', (e) => {
        e.stopPropagation();
        playerClick('player2', e);
    });

    document.addEventListener('keydown', (e) => {
        if (e.keyCode === players.player1.keyCode) playerClick('player1');
        else if (e.keyCode === players.player2.keyCode) playerClick('player2');
    });

    elements.soloModeButton.addEventListener('click', () => {
        isCoopMode = false;
        updateModeDisplay();
    });

    elements.coopModeButton.addEventListener('click', () => {
        isCoopMode = true;
        updateModeDisplay();
    });

    document.querySelectorAll('.tab-button').forEach(button => {
        button.addEventListener('click', () => {
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            button.classList.add('active');
            document.getElementById(button.dataset.tab).classList.add('active');
        });
    });

    setInterval(runAutoClicker, 1000);
    setInterval(checkAchievements, 2000);
    setInterval(checkPlayerActivity, 5000);
}

function playerClick(playerKey, event) {
    if (!isCoopMode && playerKey === 'player2') return;

    const player = players[playerKey];
    player.lastClickTime = Date.now();
    player.isActive = true;

    const clickValue = player.power;
    player.clicks += clickValue;
    clicks += clickValue;

    if (isCoopMode && players.player1.isActive && players.player2.isActive) {
        const synergyBoost = getUpgradeEffect('synergy-boost');
        clicks += clickValue * synergyBoost;
    }

    if (event) {
        createClickEffect(event, playerKey);
    } else {
        const area = elements[`${playerKey}Area`];
        const rect = area.getBoundingClientRect();
        createClickEffect({
            clientX: rect.left + rect.width / 2,
            clientY: rect.top + rect.height / 2,
            target: area
        }, playerKey);
    }

    updateProgressBar();
    updatePlayerContributions();
    updateDisplays();

    if (clicks >= targetClicks) levelUp();
}

function createClickEffect(event, playerKey) {
    const effect = document.createElement('div');
    effect.classList.add('click-effect');
    
    const rect = event.target.getBoundingClientRect();
    effect.style.left = `${event.clientX - rect.left}px`;
    effect.style.top = `${event.clientY - rect.top}px`;
    effect.style.width = '50px';
    effect.style.height = '50px';
    effect.style.backgroundColor = playerKey === 'player1' ? '#2196F3' : '#FF5722';

    event.target.appendChild(effect);
    setTimeout(() => effect.remove(), 500);
}

function updateProgressBar() {
    elements.progressBar.style.width = `${Math.min(100, (clicks / targetClicks) * 100)}%`;
}

function updatePlayerContributions() {
    const totalClicks = players.player1.clicks + players.player2.clicks;
    if (totalClicks === 0) return;

    const p1Percent = Math.round((players.player1.clicks / totalClicks) * 100);
    const p2Percent = 100 - p1Percent;

    elements.player1Contribution.textContent = p1Percent + '%';
    elements.player2Contribution.textContent = p2Percent + '%';
    elements.player1ContributionBar.style.width = p1Percent + '%';
    elements.player2ContributionBar.style.width = p2Percent + '%';
}

function updateDisplays() {
    elements.clicksDisplay.textContent = Math.floor(clicks);
    elements.levelDisplay.textContent = level;
    elements.targetDisplay.textContent = Math.ceil(targetClicks);
    elements.coinsDisplay.textContent = Math.floor(coins);
    elements.clickPowerDisplay.textContent = clickPower;
    elements.player1Clicks.textContent = Math.floor(players.player1.clicks);
    elements.player2Clicks.textContent = Math.floor(players.player2.clicks);
    elements.player1Power.textContent = players.player1.power;
    elements.player2Power.textContent = players.player2.power;

    if (isCoopMode) {
        const synergyBoost = getUpgradeEffect('synergy-boost');
        elements.teamBonus.textContent = `Bônus de Equipe: +${Math.round(synergyBoost * 100)}% de poder quando ambos jogadores estão ativos!`;
    }
}

function updateModeDisplay() {
    if (isCoopMode) {
        elements.soloModeButton.classList.remove('active');
        elements.coopModeButton.classList.add('active');
        elements.teamBonus.style.display = 'block';
        elements.player2Area.style.opacity = '1';
        elements.player2Area.style.pointerEvents = 'auto';
        targetClicks = 20;
    } else {
        elements.soloModeButton.classList.add('active');
        elements.coopModeButton.classList.remove('active');
        elements.teamBonus.style.display = 'none';
        elements.player2Area.style.opacity = '0.5';
        elements.player2Area.style.pointerEvents = 'none';
        targetClicks = 10;
    }
    updateDisplays();
    renderUpgrades();
    renderAchievements();
}

function levelUp() {
    level++;
    clicks = 0;
    const progressBoost = getUpgradeEffect('progress-boost');
    targetClicks = Math.ceil(targetClicks * progressBoost);
    const coinBoost = getUpgradeEffect('coin-boost');
    const coinsAwarded = Math.floor(level * 5 * coinBoost);
    coins += coinsAwarded;
    players.player1.clicks = 0;
    players.player2.clicks = 0;

    showNotification(`Nível ${level} alcançado! +${coinsAwarded} moedas!`);
    elements.levelDisplay.classList.add('level-up');
    setTimeout(() => elements.levelDisplay.classList.remove('level-up'), 1000);

    updateProgressBar();
    updateDisplays();
    checkAchievements();
}

function getUpgradeEffect(upgradeId) {
    const upgrade = upgrades.find(u => u.id === upgradeId);
    return upgrade ? upgrade.effect(upgrade.level) : 0;
}

function runAutoClicker() {
    const autoClickLevel = getUpgradeEffect('auto-clicker');
    if (autoClickLevel <= 0) return;

    if (isCoopMode) {
        const clicksPerPlayer = autoClickLevel / 2;
        players.player1.clicks += clicksPerPlayer * players.player1.power;
        players.player2.clicks += clicksPerPlayer * players.player2.power;
        clicks += autoClickLevel * ((players.player1.power + players.player2.power) / 2);
    } else {
        players.player1.clicks += autoClickLevel * players.player1.power;
        clicks += autoClickLevel * players.player1.power;
    }

    updateProgressBar();
    updatePlayerContributions();
    updateDisplays();
    if (clicks >= targetClicks) levelUp();
}

function checkAchievements() {
    let newlyUnlocked = false;
    achievements.forEach(achievement => {
        if (!achievement.unlocked && (!achievement.coop || isCoopMode) && achievement.requirement()) {
            achievement.unlocked = true;
            coins += achievement.reward;
            showNotification(`Objetivo Desbloqueado: ${achievement.name}! +${achievement.reward} moedas!`);
            newlyUnlocked = true;
        }
    });
    if (newlyUnlocked) {
        renderAchievements();
        updateDisplays();
    }
}

function checkPlayerActivity() {
    const now = Date.now();
    players.player1.isActive = now - players.player1.lastClickTime <= 15000;
    players.player2.isActive = now - players.player2.lastClickTime <= 15000;
}

function calculateUpgradePrice(upgrade) {
    return Math.floor(upgrade.basePrice * Math.pow(upgrade.priceIncrease, upgrade.level));
}

function buyUpgrade(upgradeId) {
    const upgrade = upgrades.find(u => u.id === upgradeId);
    if (!upgrade || upgrade.level >= upgrade.maxLevel) return false;

    const price = calculateUpgradePrice(upgrade);
    if (coins < price) return false;

    coins -= price;
    upgrade.level++;

    if (upgrade.id === 'click-power') clickPower = upgrade.effect(upgrade.level);
    else if (upgrade.id === 'player1-power') players.player1.power = upgrade.effect(upgrade.level);
    else if (upgrade.id === 'player2-power') players.player2.power = upgrade.effect(upgrade.level);

    showNotification(`Upgrade comprado: ${upgrade.name} nível ${upgrade.level}!`);
    updateDisplays();
    renderUpgrades();
    checkAchievements();
    return true;
}

function renderUpgrades() {
    elements.upgradesContainer.innerHTML = '';
    upgrades.forEach(upgrade => {
        if (!isCoopMode && upgrade.coop) return;

        const price = calculateUpgradePrice(upgrade);
        const canAfford = coins >= price;
        const maxLevel = upgrade.level >= upgrade.maxLevel;

        const upgradeElement = document.createElement('div');
        upgradeElement.className = `upgrade-item ${!canAfford || maxLevel ? 'disabled' : ''} ${upgrade.synergy ? 'synergy-upgrade' : ''}`;
        upgradeElement.innerHTML = `
            <div class="upgrade-info">
                <div>${upgrade.name}</div>
                <div class="upgrade-level">Nível ${upgrade.level}/${upgrade.maxLevel}</div>
                <div>${upgrade.description}</div>
            </div>
            <button class="buy-button" ${!canAfford || maxLevel ? 'disabled' : ''}>
                ${maxLevel ? 'MAX' : `${price} moedas`}
            </button>
        `;

        if (!maxLevel && canAfford) {
            upgradeElement.querySelector('.buy-button').addEventListener('click', () => buyUpgrade(upgrade.id));
        }
        elements.upgradesContainer.appendChild(upgradeElement);
    });
}

function renderAchievements() {
    elements.achievementsContainer.innerHTML = '';
    achievements.forEach(achievement => {
        if (!isCoopMode && achievement.coop) return;

        const achievementElement = document.createElement('div');
        achievementElement.className = `achievement-item ${achievement.unlocked ? 'unlocked' : 'locked'}`;
        achievementElement.innerHTML = `
            <div class="achievement-info">
                <div>${achievement.name}</div>
                <div>${achievement.description}</div>
                ${achievement.unlocked ? `<div>Recompensa: ${achievement.reward} moedas</div>` : ''}
            </div>
        `;
        elements.achievementsContainer.appendChild(achievementElement);
    });
}

function showNotification(message) {
    elements.notification.textContent = message;
    elements.notification.classList.add('show');
    setTimeout(() => elements.notification.classList.remove('show'), 3000);
}

initGame();
</script>
</body>
</html>
